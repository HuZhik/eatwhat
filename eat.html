<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>美食随机选择器</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: #333;
            overflow: hidden;
        }

        h1 {
            color: #ff6b6b;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 800px;
            position: relative;
            z-index: 2;
        }

        .result-container {
            width: 100%;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
        }

        .result {
            font-size: 48px;
            font-weight: bold;
            color: white;
            text-align: center;
            padding: 30px 50px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
            border-radius: 50px;
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.3);
            transform: scale(0);
            opacity: 0;
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            z-index: 3;
            border: 3px solid white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.2);
        }

        .result.show {
            transform: scale(1);
            opacity: 1;
        }

        .result:before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border-radius: 50px;
            background: linear-gradient(135deg, rgba(255,107,107,0.5) 0%, rgba(255,142,83,0.5) 100%);
            z-index: -1;
            filter: blur(15px);
        }

        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 1;
            pointer-events: none;
        }

        .floating-item {
            position: absolute;
            padding: 10px 20px;
            background-color: white;
            border-radius: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            font-weight: bold;
            opacity: 0.3;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
            z-index: 1;
            transform-origin: center;
        }

        .floating-item.highlight {
            opacity: 1;
            transform: scale(1.5) !important;
            box-shadow: 0 0 20px rgba(255,107,107,0.5);
            z-index: 2;
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from { transform: scale(1.5); }
            to { transform: scale(1.55); }
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 0.3;
            }
            50% {
                transform: translate(var(--x-move), var(--y-move)) rotate(var(--rotation));
            }
            80% {
                opacity: 0.3;
            }
            100% {
                transform: translate(calc(var(--x-move) * 1.2), calc(var(--y-move) * 1.2)) rotate(calc(var(--rotation) * 1.2));
                opacity: 0;
            }
        }

        .controls {
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 400px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            position: relative;
            z-index: 2;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
            color: white;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            border-radius: 30px;
            margin-bottom: 10px;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(255,107,107,0.3);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(255,107,107,0.4);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 0 5px 15px rgba(255,107,107,0.3);
        }

        .input-group {
            display: none;
            margin-bottom: 15px;
            animation: fadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .input-group.show {
            display: flex;
        }

        input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 30px 0 0 30px;
            font-size: 16px;
            outline: none;
        }

        .add-btn {
            border-radius: 0 30px 30px 0;
            padding: 12px 15px;
        }

        .items-list {
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
            display: none;
            animation: fadeIn 0.5s;
        }

        .items-list.show {
            display: block;
        }

        .item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: #f8f9fa;
            margin-bottom: 8px;
            border-radius: 30px;
            transition: all 0.3s;
        }

        .item:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .remove-btn {
            background: linear-gradient(135deg, #ff9e7d 0%, #ffbe76 100%);
            padding: 8px 15px;
            font-size: 14px;
            box-shadow: 0 5px 15px rgba(255,158,125,0.3);
        }

        .toggle-btn {
            background: linear-gradient(135deg, #4ECDC4 0%, #6c5ce7 100%);
            margin-top: 10px;
            box-shadow: 0 5px 15px rgba(78,205,196,0.3);
        }

        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            background-color: #f00;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10;
        }

        @media (max-width: 500px) {
            .result {
                font-size: 36px;
                padding: 20px 30px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>今天吃什么？</h1>
        
        <div class="result-container">
            <div class="result" id="result"></div>
        </div>
        
        <div class="controls">
            <button class="btn" id="spinBtn">随机选择</button>
            
            <div class="input-group" id="inputGroup">
                <input type="text" id="newItem" placeholder="输入美食名称">
                <button class="btn add-btn" id="addBtn">添加</button>
            </div>
            
            <button class="btn toggle-btn" id="toggleInputBtn">添加美食</button>
            
            <div class="items-list" id="itemsList"></div>
            
            <button class="btn remove-btn" id="removeBtn">删除选中项</button>
        </div>
    </div>
    
    <div class="background-container" id="backgroundContainer"></div>

    <script>
        // 初始美食列表
        let items = [
            // 中式主食  
            "米饭", "蛋炒饭", "扬州炒饭", "菠萝炒饭", "咖喱炒饭", "腊味煲仔饭", "卤肉饭", "黄焖鸡米饭",  
            "盖浇饭", "石锅拌饭", "牛肉饭", "鳗鱼饭", "茶泡饭", "寿司", "刺身", "紫菜包饭",  
            "拉面", "豚骨拉面", "味噌拉面", "乌冬面", "荞麦面", "冷面", "炸酱面", "刀削面",  
            "牛肉面", "热干面", "担担面", "葱油拌面", "酸辣粉", "螺蛳粉", "米线", "过桥米线",  
            "肠粉", "河粉", "干炒牛河", "饺子", "蒸饺", "煎饺", "锅贴", "馄饨",  
            "小笼包", "生煎包", "叉烧包", "烧麦", "糯米鸡", "煎饼果子", "手抓饼", "葱油饼",  
            "肉夹馍", "驴肉火烧",  

            // 西式主食  
            "汉堡", "芝士汉堡", "热狗", "三明治", "金枪鱼三明治", "法棍三明治", "披萨", "玛格丽特披萨",  
            "海鲜披萨", "夏威夷披萨", "意大利面", "番茄肉酱意面", "奶油培根意面", "千层面", "通心粉",  
            "墨西哥卷饼", "塔可", "玉米饼", "印度飞饼", "烤饼", "馕",  

            // 日韩料理  
            "韩式拌饭", "照烧鸡排饭", "亲子丼", "牛丼", "加州卷", "军舰卷", "地狱拉面",  
            "韩式烤肉", "日式烧肉", "大阪烧", "天妇罗", "炸猪排", "咖喱饭", "咖喱乌冬",  

            // 东南亚及其他  
            "越南河粉", "泰式炒河粉", "冬阴功炒饭", "海南鸡饭", "肉骨茶", "叻沙", "越南春卷",  

            // 中式炒菜/烧烤类（可作主食搭配）  
            "麻辣香锅", "麻辣烫", "火锅", "串串香", "冒菜", "干锅", "烤鱼", "烤肉",  
            "巴西烤肉", "土耳其烤肉", "烤全羊", "烤鸡", "烤鸭", "烧鹅", "白切鸡",  
            "三杯鸡", "大盘鸡", "辣子鸡", "宫保鸡丁", "口水鸡", "回锅肉", "红烧肉",  
            "糖醋排骨", "梅菜扣肉", "东坡肉", "粉蒸肉", "水煮鱼", "酸菜鱼", "清蒸鱼",  
            "剁椒鱼头", "椒盐虾", "油焖大虾", "香辣蟹", "清蒸螃蟹", "蒜蓉粉丝蒸扇贝",  
            "烤生蚝", "炒花甲", "爆炒鱿鱼", "孜然羊肉", "葱爆羊肉", "羊肉串", "牛肉串",  
            "关东煮", "章鱼烧"  
        ];

        const result = document.getElementById('result');
        const spinBtn = document.getElementById('spinBtn');
        const addBtn = document.getElementById('addBtn');
        const removeBtn = document.getElementById('removeBtn');
        const toggleInputBtn = document.getElementById('toggleInputBtn');
        const newItemInput = document.getElementById('newItem');
        const inputGroup = document.getElementById('inputGroup');
        const itemsList = document.getElementById('itemsList');
        const backgroundContainer = document.getElementById('backgroundContainer');

        // 颜色选项
        const colors = [
            "#FF6B6B", "#4ECDC4", "#45B7D1", "#FFA07A", 
            "#FDCB6E", "#E17055", "#00B894", "#E84393",
            "#6C5CE7", "#00CEc9", "#0984E3", "#F39C12"
        ];

        // 初始化浮动元素
        function initFloatingItems() {
            backgroundContainer.innerHTML = '';
            
            // 创建足够多的浮动元素
            const itemsPerScreen = Math.ceil(window.innerWidth / 150) * Math.ceil(window.innerHeight / 80) * 2;
            const totalItems = Math.max(itemsPerScreen, items.length * 3);
            
            for (let i = 0; i < totalItems; i++) {
                const itemIndex = i % items.length;
                const item = document.createElement('div');
                item.className = 'floating-item';
                item.textContent = items[itemIndex];
                item.style.color = 'white';
                item.style.backgroundColor = colors[itemIndex % colors.length];
                
                // 随机起始位置
                const startX = Math.random() * 100;
                const startY = Math.random() * 100;
                
                item.style.left = `${startX}%`;
                item.style.top = `${startY}%`;
                
                // 随机动画参数
                const duration = Math.random() * 15 + 20; // 20-35秒
                const delay = Math.random() * 5;
                const xMovement = (Math.random() - 0.5) * 200;
                const yMovement = Math.random() * 100 + 100;
                const rotation = (Math.random() - 0.5) * 360;
                
                // 设置CSS变量
                item.style.setProperty('--x-move', `${xMovement}px`);
                item.style.setProperty('--y-move', `${yMovement}px`);
                item.style.setProperty('--rotation', `${rotation}deg`);
                
                // 应用动画
                item.style.animation = `float ${duration}s ease-in-out ${delay}s infinite`;
                
                backgroundContainer.appendChild(item);
            }
        }

        // 更新美食列表显示
        function updateItemsList() {
            itemsList.innerHTML = '';
            
            items.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'item';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `item-${index}`;
                checkbox.dataset.index = index;
                
                const label = document.createElement('label');
                label.htmlFor = `item-${index}`;
                label.textContent = item;
                label.style.marginLeft = '10px';
                label.style.flexGrow = '1';
                
                itemElement.appendChild(checkbox);
                itemElement.appendChild(label);
                
                itemsList.appendChild(itemElement);
            });
        }

        // 创建彩色纸屑效果
        function createConfetti() {
            const confettiCount = 100;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = '0';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = `${Math.random() * 12 + 5}px`;
                confetti.style.height = confetti.style.width;
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                
                document.body.appendChild(confetti);
                
                const animationDuration = Math.random() * 3 + 2;
                const xMovement = (Math.random() - 0.5) * 100;
                
                confetti.style.animation = `fall ${animationDuration}s linear forwards`;
                
                // 创建下落动画
                const keyframes = `
                    @keyframes fall {
                        to {
                            transform: translate(${xMovement}px, 100vh) rotate(${Math.random() * 360}deg);
                            opacity: 0;
                        }
                    }
                `;
                
                const style = document.createElement('style');
                style.innerHTML = keyframes;
                document.head.appendChild(style);
                
                // 动画结束后移除元素
                setTimeout(() => {
                    confetti.remove();
                    style.remove();
                }, animationDuration * 1000);
            }
        }

        // 随机选择美食
        function selectRandomItem() {
            if (items.length === 0) {
                alert('请先添加美食选项！');
                return;
            }
            
            spinBtn.disabled = true;
            result.classList.remove('show');
            
            // 随机选择一个美食
            const randomIndex = Math.floor(Math.random() * items.length);
            const selectedFood = items[randomIndex];
            
            // 找到所有匹配的浮动元素
            const allItems = document.querySelectorAll('.floating-item');
            const matchingItems = Array.from(allItems).filter(item => item.textContent === selectedFood);
            
            if (matchingItems.length > 0) {
                // 随机选择一个匹配项进行高亮
                const selectedItem = matchingItems[Math.floor(Math.random() * matchingItems.length)];
                selectedItem.classList.add('highlight');
                
                // 显示最终结果
                setTimeout(() => {
                    result.textContent = selectedFood;
                    result.classList.add('show');
                    spinBtn.disabled = false;
                    createConfetti();
                    
                    // 延长高亮效果持续时间
                    setTimeout(() => {
                        selectedItem.classList.remove('highlight');
                    }, 3000);
                }, 800);
            }
        }

        // 添加新美食
        function addItem() {
            const itemName = newItemInput.value.trim();
            
            if (!itemName) {
                alert('请输入美食名称！');
                return;
            }
            
            if (items.includes(itemName)) {
                alert('该美食已存在！');
                return;
            }
            
            items.push(itemName);
            newItemInput.value = '';
            updateItemsList();
            initFloatingItems();
            toggleInput();
        }

        // 删除选中的美食
        function removeSelectedItems() {
            const checkboxes = document.querySelectorAll('#itemsList input[type="checkbox"]:checked');
            
            if (checkboxes.length === 0) {
                alert('请先选择要删除的美食！');
                return;
            }
            
            // 从后往前删除，避免索引问题
            const indexesToRemove = Array.from(checkboxes)
                .map(checkbox => parseInt(checkbox.dataset.index))
                .sort((a, b) => b - a);
            
            indexesToRemove.forEach(index => {
                items.splice(index, 1);
            });
            
            updateItemsList();
            initFloatingItems();
            result.textContent = '';
            result.classList.remove('show');
        }

        // 切换输入框显示
        function toggleInput() {
            inputGroup.classList.toggle('show');
            itemsList.classList.toggle('show');
            
            if (inputGroup.classList.contains('show')) {
                toggleInputBtn.textContent = '取消添加';
                toggleInputBtn.style.background = 'linear-gradient(135deg, #ff9e7d 0%, #ffbe76 100%)';
                newItemInput.focus();
            } else {
                toggleInputBtn.textContent = '添加美食';
                toggleInputBtn.style.background = 'linear-gradient(135deg, #4ECDC4 0%, #6c5ce7 100%)';
            }
        }

        // 事件监听
        spinBtn.addEventListener('click', selectRandomItem);
        addBtn.addEventListener('click', addItem);
        removeBtn.addEventListener('click', removeSelectedItems);
        toggleInputBtn.addEventListener('click', toggleInput);
        
        newItemInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addItem();
            }
        });

        // 窗口大小变化时重新初始化背景
        window.addEventListener('resize', initFloatingItems);

        // 初始化
        initFloatingItems();
        updateItemsList();
    </script>
</body>
</html>